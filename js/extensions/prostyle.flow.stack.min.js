/*!
 * VERSION: 0.20.0
 * DATE: 05-Sep-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle. It may be
 * used for free for personal projects or licensed per website domain name for commercial use.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/license/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(k,c){function n(){this.constructor=k}for(var l in c)c.hasOwnProperty(l)&&(k[l]=c[l]);n.prototype=c.prototype;k.prototype=new n},ProStyle;
(function(k){(function(c){(function(c){(function(l){var m=function(k){function m(l,q,c,t,n){k.call(this,l,"stack",q,c,t,"stackedpage");this.stacks=n}__extends(m,k);m.prototype.serialize=function(){return l.serialize(this)};m.prototype.createView=function(k,m){return new l.StackFlowView(this,k,m)};m.defaultStacksJson={current:{position:[0,0,0],rotation:[0,0,0],scale:100,opacity:100},future:{position:[140,0,-200],rotation:[0,-10,5],scale:100,opacity:80,offset:{position:[130,80,-200],rotation:[0,-5,
2],scale:100,opacity:50}},past:{position:[-140,0,-200],rotation:[0,10,-5],scale:100,opacity:80,offset:{position:[-130,80,-200],rotation:[0,5,-2],scale:100,opacity:50}}};return m}(k.Models.Flows.PlacementFlowModel);l.StackFlowModel=m})(c.Stack||(c.Stack={}))})(c.Flows||(c.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(c){(function(c){(function(l){var m=function(k){function l(m,c,v){k.call(this,m,c,v);this.stackFlow=m}__extends(l,k);l.prototype.initializePages=function(l){var k=this,m=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio);this.pages.forEach(function(c,n){l.set(k.pages[n].div,{width:m.width,height:m.height,perspective:1E4},"initialize")})};l.prototype.generatePageMovement=function(l,k,m){var c=this.stackFlow.stacks.current,n=this.stackFlow.stacks.future,p=this.stackFlow.stacks.futureOffset,
r=this.stackFlow.stacks.past,w=this.stackFlow.stacks.pastOffset,a=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio),c=c.renderCss(a);this.applyCss(l,this.pages[m].div,k,1,c,Expo.easeOut);for(var r=r.duplicate(),g=m-1;0<=g;g--)c=r.renderCss(a),this.applyCss(l,this.pages[g].div,k,1,c,Expo.easeOut),r.adjust(w);n=n.duplicate();for(g=m+1;g<this.pages.length;g++)c=n.renderCss(a),this.applyCss(l,this.pages[g].div,k,1,c,Expo.easeOut),n.adjust(p)};l.prototype.applyCss=function(l,k,m,c,n,r){"initialize"===
m?l.set(k,n,m):(n.ease=r,l.to(k,c,n,m))};return l}(k.Views.Flows.PlacementFlowView);l.StackFlowView=m})(c.Stack||(c.Stack={}))})(c.Flows||(c.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(c){function n(a,g){var d=a.length,f=g.length;if(d<f)return n(g,a);for(var b=0,e=[],h=0;h<f;h++)b+=a[h]+g[h],e[h]=b&268435455,b>>>=28;for(;h<d;h++)b+=a[h],e[h]=b&268435455,b>>>=28;b&&(e[h]=b);return e}function l(a,g){var d=a.length,f=g.length,b=0,e=[];if(f>d)return[];if(f==d){if(g[f-1]>a[f-1])return[];if(1==f)return[a[0]-g[0]]}for(var h=0;h<f;h++)b+=a[h]-g[h],e[h]=b&268435455,b>>=28;for(;h<d;h++)b+=a[h],e[h]=b&268435455,b>>=28;if(b)return[];if(e[h-1])return e;for(;1<h&&0==e[h-
1];)h--;return e.slice(0,h)}function m(a,g){g=g.concat([0]);var d=a.length,f=g.length,b=[],e,h,l,k,m,c,n,r,p;for(e=d+f;0<=e;e--)b[e]=0;for(e=0;e<d;e++)if(h=a[e])for(l=0,r=h>>14,n=h&16383,k=e,h=0;h<f;h++,k++){m=g[h];c=m>>14;m&=16383;var q=m*r+n*c;p=q>>14;q&=16383;l+=b[k]+n*m+(q<<14);b[k]=l&268435455;l=(l>>28)+c*r+p}e=b.length;if(b[e-1])return b;for(;1<e&&0==b[e-1];)e--;return b.slice(0,e)}function r(a){for(var g=[];0<a--;)g[a]=0;return g}function p(a,g,d){for(var f=0;0<=g&&0<d--;)f=268435456*f+a[g--];
return f}function u(a,g){var d=a.length-1,f=g.length-1,b=d-f;if(d<f||d==f&&(a[d]<g[d]||0<d&&a[d]==g[d]&&a[d-1]<g[d-1]))return this.q=[0],this.mod=a,this;if(d==f&&4>p(a,f,2)/p(g,f,2)){for(var e=0;;){f=l(a,g);if(0==f.length)break;a=f;e++}this.q=[e];this.mod=a;return this}var h,k;k=Math.floor(Math.log(g[f])/w)+1;if(h=28-k){a=a.concat();g=g.concat();for(c=f;0<c;c--)g[c]=g[c]<<h&268435455|g[c-1]>>k;g[0]=g[0]<<h&268435455;a[d]&268435455<<k&268435455&&(a[++d]=0,b++);for(c=d;0<c;c--)a[c]=a[c]<<h&268435455|
a[c-1]>>k;a[0]=a[0]<<h&268435455}var c,n,q,e=r(b+1);for(q=r(b).concat(g);;){n=l(a,q);if(0==n.length)break;e[b]++;a=n}var b=g[f],t=p(g,f,2);for(c=d;c>f;c--){d=c-f-1;e[d]=c>=a.length?1:a[c]==b?268435455:Math.floor(p(a,c,2)/b);for(n=p(a,c,3);e[d]*t>n;)e[d]--;q=q.slice(1);n=l(a,m([e[d]],q));0==n.length&&(e[d]--,n=l(a,m([e[d]],q)));a=n}if(h){for(c=0;c<a.length-1;c++)a[c]=a[c]>>h|a[c+1]<<k&268435455;a[a.length-1]>>=h}for(;1<e.length&&0==e[e.length-1];)e=e.slice(0,e.length-1);for(;1<a.length&&0==a[a.length-
1];)a=a.slice(0,a.length-1);this.mod=a;this.q=e;return this}function q(a,g){if(1==g.length){if(1==a.length)return[a[0]%g[0]];if(16383>g[0]){var d;d=g[0];if(16383<d)d=q(a,[d]);else{for(var f=0,b,e=a.length-1;0<=e;e--)b=a[e],f=((b>>14)+(f<<14))%d,f=((b&16383)+(f<<14))%d;d=f}return[d]}}return u(a,g).mod}function v(a,g,d){var f=[1],b,e,h=a.concat(),c=[];a=2*d.length;for(c[a--]=1;0<=a;a--)c[a]=0;c=u(c,d).q;for(a=0;a<g.length;a++)for(e=1,b=0;28>b;b++,e<<=1)g[a]&e&&(f=t(m(f,h),d,c)),h=t(m(h,h),d,c);return f}
function t(a,g,d){var f=a.length-(g.length<<1);if(0<f)return t(a.slice(0,f).concat(t(a.slice(f),g,d)),g,d);var f=g.length+1,b=m(a.slice(g.length-1),d).slice(f),e=a.slice(0,f),b=m(b,g).slice(0,f);a=l(e,b);0==a.length&&(e[f]=1,a=l(e,b));for(e=0;;e++){f=l(a,g);if(0==f.length)break;a=f;if(3<=e)return t(a,g,d)}return a}function x(a,g){var d=l(a,g);0==d.length?(this.a=l(g,a),this.sign=1):(this.a=d,this.sign=0);return this}function z(a,g){if(a.sign){if(g.sign)return x(g,a);this.a=n(a,g);this.sign=1}else if(g.sign)this.a=
n(a,g),this.sign=0;else return x(a,g);return this}function y(a,g){var d=g.concat(),f,b,e=[1],h=[0],c;e.sign=0;for(h.sign=0;1<d.length||d[0];)f=d.concat(),b=u(a,d),d=b.mod,b=b.q,a=f,f=h.concat(),c=h.sign,b=m(h,b),b.sign=h.sign,b=z(e,b),h=b.a,h.sign=b.sign,e=f,e.sign=c;a:if(d=[1],a.length!=d.length)d=0;else{for(f=a.length-1;0<=f;f--)if(a[f]!=d[f]){d=0;break a}d=1}if(0==d)return[0];e.sign&&(e=l(g,e));return e}var w=Math.log(2);c.c=function(){if(!k.pl){var a=window.location.hostname.trim().toLowerCase();
if(""!==a&&"localhost"!==a&&"127.0.0.1"!==a){k.hn=a;var g=k.plusLicense;if(void 0===g)k.pl=2;else{for(var d=[[239800443,61606552,84],[201280845,11],[166507101,13]],f="",b=0,e=0,h,c=0;c<g.length;c++)h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-".indexOf(g.charAt(c)),0<=h&&(b&&(f+=String.fromCharCode(h<<8-b&255|e)),e=h>>b,b+=2,8==b&&(b=0));g=f;f=g.charCodeAt(0);b=g.substr(1,f);g=g.substr(f+1);e=8*b.length;h=1;for(var f=[0],r=c=0,p=1,t=b.charCodeAt(0),u=0;u<e;u++)268435455<h&&(h=
1,f[++c]=0),t&p&&(f[c]|=h),h<<=1,255<(p<<=1)&&(p=1,t=b.charCodeAt(++r));h=d[0];b=d[1];d=d[2];e=v(q(f,b),q(h,l(b,[1])),b);f=v(q(f,d),q(h,l(d,[1])),d);h=l(f,e);0==h.length?(h=l(e,f),h=q(m(h,y(b,d)),d),h=l(d,h)):h=q(m(h,y(b,d)),d);e=d=n(m(h,b),e);h=28*e.length;c=1;r=0;d=[0];p=1;for(b=f=0;b<h;b++)e[r]&c&&(d[f]|=p),255<(p<<=1)&&(p=1,d[++f]=0),268435455<(c<<=1)&&(c=1,r++);for(;0==d[f];)f--;e="";for(b=0;b<=f;b++)e+=String.fromCharCode(d[b]);f=e;c=f.length;d=[];for(b=0;256>b;b++)d[b]=b;for(r=e=0;2>r;r++)for(b=
0;256>b;b++)e=(f.charCodeAt(b%c)+d[b]+e)%256,h=d[b],d[b]=d[e],d[e]=h;c="";for(b=0;b<g.length;b++)f=b&255,e=d[f]+e&255,h=d[f],d[f]=d[e],d[e]=h,c+=String.fromCharCode(g.charCodeAt(b)^d[(d[f]+d[e])%256]);g=c;k.pld=g;k.pl=g===a?1:3}}}}})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(c){(function(n){(function(l){var m=k.Util;l.deserialize=function(n,p){c.c();var u=k.Types.Placement.fromJson(m.getSetup(p,"placement")),q=m.convertToNumber(m.getSetup(p,"pageAspectRatio"),4/3),v=k.Types.Stacks.fromJson(m.getSetup(p,"stacks")||l.StackFlowModel.defaultStacksJson);return new l.StackFlowModel(n,u,m.getSetup(p,"defaultPageClass"),q,v)}})(n.Stack||(n.Stack={}))})(c.Flows||(c.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(c){(function(c){(function(c){c.serialize=function(c){var k={setup:{}};void 0!==c.defaultPageClass&&(k.setup.defaultPageClass=c.defaultPageClass);return k}})(c.Stack||(c.Stack={}))})(c.Flows||(c.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
