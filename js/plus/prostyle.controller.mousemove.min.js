/*!
 * VERSION: 1.1.0
 * DATE: 17-Sep-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(l,k){function q(){this.constructor=l}for(var h in k)k.hasOwnProperty(h)&&(l[h]=k[h]);q.prototype=k.prototype;l.prototype=new q},ProStyle;
(function(l){(function(k){(function(k){(function(h){var k=function(k){function n(h,l){void 0===h&&(h=0);void 0===l&&(l=100);k.call(this,"mousemove");this.startPercent=h;this.endPercent=l;this.player=this.canvas=this.mouseoutBound=this.mousemoveBound=void 0;this.startVal=0;this.endVal=100;Math.max(Math.min(0,h),100);Math.max(Math.min(0,l),100);this.startVal=this.startPercent/100;this.endVal=this.endPercent/100;this.mousemoveBound=this.mousemove.bind(this);this.mouseoutBound=this.mouseout.bind(this)}
__extends(n,k);n.prototype.start=function(h,l){this.stop();this.canvas=h;this.player=l;h.frame.div.addEventListener("mousemove",this.mousemoveBound);h.frame.div.addEventListener("mouseout",this.mouseoutBound)};n.prototype.stop=function(){void 0!==this.player&&(this.canvas.frame.div.removeEventListener("mousemove",this.mousemoveBound),this.canvas.frame.div.removeEventListener("mouseout",this.mouseoutBound),this.player=this.canvas=void 0)};n.prototype.mouseout=function(h){this.player&&this.player.playCurrentStep()};
n.prototype.mousemove=function(h){var n=h.currentTarget,k=l.Util.getOffset(n);this.player.seek(this.posToSeek((h.pageX-k.left)/n.offsetWidth));h.stopPropagation();h.preventDefault()};n.prototype.posToSeek=function(h){var l;if(this.startVal==this.endVal)return h<this.startVal?0:100;if(this.startVal<this.endVal){if(h<this.startVal)return 0;if(h>this.endVal)return 100;l=this.endVal-this.startVal;return(h-this.startVal)/l}if(h>this.startVal)return 0;if(h<this.endVal)return 100;l=this.startVal-this.endVal;
return(this.startVal-h)/l};n.prototype.serialize=function(){return h.serialize(this)};return n}(l.Controllers.Controller);h.MouseMoveController=k})(k.MouseMove||(k.MouseMove={}))})(k.Controllers||(k.Controllers={}))})(l.Extensions||(l.Extensions={}))})(ProStyle||(ProStyle={}));
(function(l){(function(k){function q(a,g){var c=a.length,e=g.length;if(c<e)return q(g,a);for(var b=0,d=[],f=0;f<e;f++)b+=a[f]+g[f],d[f]=b&268435455,b>>>=28;for(;f<c;f++)b+=a[f],d[f]=b&268435455,b>>>=28;b&&(d[f]=b);return d}function h(a,g){var c=a.length,e=g.length,b=0,d=[];if(e>c)return[];if(e==c){if(g[e-1]>a[e-1])return[];if(1==e)return[a[0]-g[0]]}for(var f=0;f<e;f++)b+=a[f]-g[f],d[f]=b&268435455,b>>=28;for(;f<c;f++)b+=a[f],d[f]=b&268435455,b>>=28;if(b)return[];if(d[f-1])return d;for(;1<f&&0==d[f-
1];)f--;return d.slice(0,f)}function n(a,g){g=g.concat([0]);var c=a.length,e=g.length,b=[],d,f,h,m,l,n,k,q,r;for(d=c+e;0<=d;d--)b[d]=0;for(d=0;d<c;d++)if(f=a[d])for(h=0,q=f>>14,k=f&16383,m=d,f=0;f<e;f++,m++){l=g[f];n=l>>14;l&=16383;var p=l*q+k*n;r=p>>14;p&=16383;h+=b[m]+k*l+(p<<14);b[m]=h&268435455;h=(h>>28)+n*q+r}d=b.length;if(b[d-1])return b;for(;1<d&&0==b[d-1];)d--;return b.slice(0,d)}function v(a){for(var g=[];0<a--;)g[a]=0;return g}function p(a,g,c){for(var e=0;0<=g&&0<c--;)e=268435456*e+a[g--];
return e}function u(a,g){var c=a.length-1,e=g.length-1,b=c-e;if(c<e||c==e&&(a[c]<g[c]||0<c&&a[c]==g[c]&&a[c-1]<g[c-1]))return this.q=[0],this.mod=a,this;if(c==e&&4>p(a,e,2)/p(g,e,2)){for(var d=0;;){e=h(a,g);if(0==e.length)break;a=e;d++}this.q=[d];this.mod=a;return this}var f,l;l=Math.floor(Math.log(g[e])/z)+1;if(f=28-l){a=a.concat();g=g.concat();for(m=e;0<m;m--)g[m]=g[m]<<f&268435455|g[m-1]>>l;g[0]=g[0]<<f&268435455;a[c]&268435455<<l&268435455&&(a[++c]=0,b++);for(m=c;0<m;m--)a[m]=a[m]<<f&268435455|
a[m-1]>>l;a[0]=a[0]<<f&268435455}var m,k,q,d=v(b+1);for(q=v(b).concat(g);;){k=h(a,q);if(0==k.length)break;d[b]++;a=k}var b=g[e],r=p(g,e,2);for(m=c;m>e;m--){c=m-e-1;d[c]=m>=a.length?1:a[m]==b?268435455:Math.floor(p(a,m,2)/b);for(k=p(a,m,3);d[c]*r>k;)d[c]--;q=q.slice(1);k=h(a,n([d[c]],q));0==k.length&&(d[c]--,k=h(a,n([d[c]],q)));a=k}if(f){for(m=0;m<a.length-1;m++)a[m]=a[m]>>f|a[m+1]<<l&268435455;a[a.length-1]>>=f}for(;1<d.length&&0==d[d.length-1];)d=d.slice(0,d.length-1);for(;1<a.length&&0==a[a.length-
1];)a=a.slice(0,a.length-1);this.mod=a;this.q=d;return this}function r(a,g){if(1==g.length){if(1==a.length)return[a[0]%g[0]];if(16383>g[0]){var c;c=g[0];if(16383<c)c=r(a,[c]);else{for(var e=0,b,d=a.length-1;0<=d;d--)b=a[d],e=((b>>14)+(e<<14))%c,e=((b&16383)+(e<<14))%c;c=e}return[c]}}return u(a,g).mod}function w(a,g,c){var e=[1],b,d,f=a.concat(),h=[];a=2*c.length;for(h[a--]=1;0<=a;a--)h[a]=0;h=u(h,c).q;for(a=0;a<g.length;a++)for(d=1,b=0;28>b;b++,d<<=1)g[a]&d&&(e=t(n(e,f),c,h)),f=t(n(f,f),c,h);return e}
function t(a,g,c){var e=a.length-(g.length<<1);if(0<e)return t(a.slice(0,e).concat(t(a.slice(e),g,c)),g,c);var e=g.length+1,b=n(a.slice(g.length-1),c).slice(e),d=a.slice(0,e),b=n(b,g).slice(0,e);a=h(d,b);0==a.length&&(d[e]=1,a=h(d,b));for(d=0;;d++){e=h(a,g);if(0==e.length)break;a=e;if(3<=d)return t(a,g,c)}return a}function x(a,g){var c=h(a,g);0==c.length?(this.a=h(g,a),this.sign=1):(this.a=c,this.sign=0);return this}function A(a,g){if(a.sign){if(g.sign)return x(g,a);this.a=q(a,g);this.sign=1}else if(g.sign)this.a=
q(a,g),this.sign=0;else return x(a,g);return this}function y(a,g){var c=g.concat(),e,b,d=[1],f=[0],l;d.sign=0;for(f.sign=0;1<c.length||c[0];)e=c.concat(),b=u(a,c),c=b.mod,b=b.q,a=e,e=f.concat(),l=f.sign,b=n(f,b),b.sign=f.sign,b=A(d,b),f=b.a,f.sign=b.sign,d=e,d.sign=l;a:if(c=[1],a.length!=c.length)c=0;else{for(e=a.length-1;0<=e;e--)if(a[e]!=c[e]){c=0;break a}c=1}if(0==c)return[0];d.sign&&(d=h(g,d));return d}var z=Math.log(2);k.c=function(){if(!l.pl){var a=window.location.hostname.trim().toLowerCase();
if(""!==a&&"localhost"!==a&&"127.0.0.1"!==a){l.hn=a;var g=l.plusLicense;if(void 0===g)l.pl=2;else{for(var c=[[239800443,61606552,84],[201280845,11],[166507101,13]],e="",b=0,d=0,f,k=0;k<g.length;k++)f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-".indexOf(g.charAt(k)),0<=f&&(b&&(e+=String.fromCharCode(f<<8-b&255|d)),d=f>>b,b+=2,8==b&&(b=0));g=e;e=g.charCodeAt(0);b=g.substr(1,e);g=g.substr(e+1);d=8*b.length;f=1;for(var e=[0],m=k=0,p=1,t=b.charCodeAt(0),u=0;u<d;u++)268435455<f&&(f=
1,e[++k]=0),t&p&&(e[k]|=f),f<<=1,255<(p<<=1)&&(p=1,t=b.charCodeAt(++m));f=c[0];b=c[1];c=c[2];d=w(r(e,b),r(f,h(b,[1])),b);e=w(r(e,c),r(f,h(c,[1])),c);f=h(e,d);0==f.length?(f=h(d,e),f=r(n(f,y(b,c)),c),f=h(c,f)):f=r(n(f,y(b,c)),c);d=c=q(n(f,b),d);f=28*d.length;k=1;m=0;c=[0];p=1;for(b=e=0;b<f;b++)d[m]&k&&(c[e]|=p),255<(p<<=1)&&(p=1,c[++e]=0),268435455<(k<<=1)&&(k=1,m++);for(;0==c[e];)e--;d="";for(b=0;b<=e;b++)d+=String.fromCharCode(c[b]);e=d;k=e.length;c=[];for(b=0;256>b;b++)c[b]=b;for(m=d=0;2>m;m++)for(b=
0;256>b;b++)d=(e.charCodeAt(b%k)+c[b]+d)%256,f=c[b],c[b]=c[d],c[d]=f;k="";for(b=0;b<g.length;b++)e=b&255,d=c[e]+d&255,f=c[e],c[e]=c[d],c[d]=f,k+=String.fromCharCode(g.charCodeAt(b)^c[(c[e]+c[d])%256]);g=k;l.pld=g;l.pl=g===a?1:3}}}}})(l.Extensions||(l.Extensions={}))})(ProStyle||(ProStyle={}));
(function(l){(function(k){(function(l){(function(h){h.deserialize=function(l){k.c();return new h.MouseMoveController(l.start,l.end)}})(l.MouseMove||(l.MouseMove={}))})(k.Controllers||(k.Controllers={}))})(l.Extensions||(l.Extensions={}))})(ProStyle||(ProStyle={}));
(function(l){(function(k){(function(k){(function(h){h.serialize=function(h){return{start:h.startPercent,end:h.endPercent}}})(k.MouseMove||(k.MouseMove={}))})(k.Controllers||(k.Controllers={}))})(l.Extensions||(l.Extensions={}))})(ProStyle||(ProStyle={}));
