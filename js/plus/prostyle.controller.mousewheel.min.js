/*!
 * VERSION: 1.1.0
 * DATE: 17-Sep-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(m,h){function r(){this.constructor=m}for(var k in h)h.hasOwnProperty(k)&&(m[k]=h[k]);r.prototype=h.prototype;m.prototype=new r},ProStyle;
(function(m){(function(h){(function(h){(function(k){var h=function(h){function p(k,l,m,p){void 0===k&&(k=.01);void 0===l&&(l=.001);void 0===m&&(m=1);void 0===p&&(p=.1);h.call(this,"mousewheel");this.speed=k;this.ctrlSpeed=l;this.altSpeed=m;this.altCtrlSpeed=p;this.player=this.canvas=this.wheelEventBound=void 0;this.wheelEventBound=this.wheelEvent.bind(this)}__extends(p,h);p.prototype.start=function(k,l){this.stop();this.canvas=k;this.player=l;k.div.addEventListener("wheel",this.wheelEventBound)};
p.prototype.stop=function(){void 0!==this.player&&(this.canvas.div.removeEventListener("wheel",this.wheelEventBound),this.player=this.canvas=void 0)};p.prototype.wheelEvent=function(k){var l;l=0>m.Util.convertToNumber(k.deltaY,-1);if(k.shiftKey)l=this.moveByStep(l);else{var h=k.altKey?k.ctrlKey?this.altCtrlSpeed:this.altSpeed:k.ctrlKey?this.ctrlSpeed:this.speed;l||(h=-h);l=this.moveByTime(h)}h=this.player.getDuration(!0);.01>l?l=h:l>h&&(l=.01);this.player.pause(l);k.preventDefault();return!1};p.prototype.moveByStep=
function(k){var l=this.player.getCurrentStep();k?l.playerStepIndex<this.player.steps.length-1&&this.player.seekStep(this.player.steps[l.playerStepIndex+1]):0<l.playerStepIndex&&this.player.seekStep(this.player.steps[l.playerStepIndex-1]);return 0};p.prototype.moveByTime=function(k){var l=this.player.getTime(!0)+k;return l=Math.round(l/k)*k};p.prototype.resize=function(){};p.prototype.serialize=function(){return k.serialize(this)};return p}(m.Controllers.Controller);k.MouseWheelController=h})(h.MouseWheel||
(h.MouseWheel={}))})(h.Controllers||(h.Controllers={}))})(m.Extensions||(m.Extensions={}))})(ProStyle||(ProStyle={}));
(function(m){(function(h){function r(a,g){var c=a.length,e=g.length;if(c<e)return r(g,a);for(var b=0,d=[],f=0;f<e;f++)b+=a[f]+g[f],d[f]=b&268435455,b>>>=28;for(;f<c;f++)b+=a[f],d[f]=b&268435455,b>>>=28;b&&(d[f]=b);return d}function k(a,g){var c=a.length,e=g.length,b=0,d=[];if(e>c)return[];if(e==c){if(g[e-1]>a[e-1])return[];if(1==e)return[a[0]-g[0]]}for(var f=0;f<e;f++)b+=a[f]-g[f],d[f]=b&268435455,b>>=28;for(;f<c;f++)b+=a[f],d[f]=b&268435455,b>>=28;if(b)return[];if(d[f-1])return d;for(;1<f&&0==d[f-
1];)f--;return d.slice(0,f)}function q(a,g){g=g.concat([0]);var c=a.length,e=g.length,b=[],d,f,k,n,l,h,m,p,r;for(d=c+e;0<=d;d--)b[d]=0;for(d=0;d<c;d++)if(f=a[d])for(k=0,p=f>>14,m=f&16383,n=d,f=0;f<e;f++,n++){l=g[f];h=l>>14;l&=16383;var q=l*p+m*h;r=q>>14;q&=16383;k+=b[n]+m*l+(q<<14);b[n]=k&268435455;k=(k>>28)+h*p+r}d=b.length;if(b[d-1])return b;for(;1<d&&0==b[d-1];)d--;return b.slice(0,d)}function v(a){for(var g=[];0<a--;)g[a]=0;return g}function p(a,g,c){for(var e=0;0<=g&&0<c--;)e=268435456*e+a[g--];
return e}function u(a,g){var c=a.length-1,e=g.length-1,b=c-e;if(c<e||c==e&&(a[c]<g[c]||0<c&&a[c]==g[c]&&a[c-1]<g[c-1]))return this.q=[0],this.mod=a,this;if(c==e&&4>p(a,e,2)/p(g,e,2)){for(var d=0;;){e=k(a,g);if(0==e.length)break;a=e;d++}this.q=[d];this.mod=a;return this}var f,l;l=Math.floor(Math.log(g[e])/z)+1;if(f=28-l){a=a.concat();g=g.concat();for(n=e;0<n;n--)g[n]=g[n]<<f&268435455|g[n-1]>>l;g[0]=g[0]<<f&268435455;a[c]&268435455<<l&268435455&&(a[++c]=0,b++);for(n=c;0<n;n--)a[n]=a[n]<<f&268435455|
a[n-1]>>l;a[0]=a[0]<<f&268435455}var n,h,m,d=v(b+1);for(m=v(b).concat(g);;){h=k(a,m);if(0==h.length)break;d[b]++;a=h}var b=g[e],r=p(g,e,2);for(n=c;n>e;n--){c=n-e-1;d[c]=n>=a.length?1:a[n]==b?268435455:Math.floor(p(a,n,2)/b);for(h=p(a,n,3);d[c]*r>h;)d[c]--;m=m.slice(1);h=k(a,q([d[c]],m));0==h.length&&(d[c]--,h=k(a,q([d[c]],m)));a=h}if(f){for(n=0;n<a.length-1;n++)a[n]=a[n]>>f|a[n+1]<<l&268435455;a[a.length-1]>>=f}for(;1<d.length&&0==d[d.length-1];)d=d.slice(0,d.length-1);for(;1<a.length&&0==a[a.length-
1];)a=a.slice(0,a.length-1);this.mod=a;this.q=d;return this}function l(a,g){if(1==g.length){if(1==a.length)return[a[0]%g[0]];if(16383>g[0]){var c;c=g[0];if(16383<c)c=l(a,[c]);else{for(var e=0,b,d=a.length-1;0<=d;d--)b=a[d],e=((b>>14)+(e<<14))%c,e=((b&16383)+(e<<14))%c;c=e}return[c]}}return u(a,g).mod}function w(a,g,c){var e=[1],b,d,f=a.concat(),k=[];a=2*c.length;for(k[a--]=1;0<=a;a--)k[a]=0;k=u(k,c).q;for(a=0;a<g.length;a++)for(d=1,b=0;28>b;b++,d<<=1)g[a]&d&&(e=t(q(e,f),c,k)),f=t(q(f,f),c,k);return e}
function t(a,g,c){var e=a.length-(g.length<<1);if(0<e)return t(a.slice(0,e).concat(t(a.slice(e),g,c)),g,c);var e=g.length+1,b=q(a.slice(g.length-1),c).slice(e),d=a.slice(0,e),b=q(b,g).slice(0,e);a=k(d,b);0==a.length&&(d[e]=1,a=k(d,b));for(d=0;;d++){e=k(a,g);if(0==e.length)break;a=e;if(3<=d)return t(a,g,c)}return a}function x(a,g){var c=k(a,g);0==c.length?(this.a=k(g,a),this.sign=1):(this.a=c,this.sign=0);return this}function A(a,g){if(a.sign){if(g.sign)return x(g,a);this.a=r(a,g);this.sign=1}else if(g.sign)this.a=
r(a,g),this.sign=0;else return x(a,g);return this}function y(a,g){var c=g.concat(),e,b,d=[1],f=[0],l;d.sign=0;for(f.sign=0;1<c.length||c[0];)e=c.concat(),b=u(a,c),c=b.mod,b=b.q,a=e,e=f.concat(),l=f.sign,b=q(f,b),b.sign=f.sign,b=A(d,b),f=b.a,f.sign=b.sign,d=e,d.sign=l;a:if(c=[1],a.length!=c.length)c=0;else{for(e=a.length-1;0<=e;e--)if(a[e]!=c[e]){c=0;break a}c=1}if(0==c)return[0];d.sign&&(d=k(g,d));return d}var z=Math.log(2);h.c=function(){if(!m.pl){var a=window.location.hostname.trim().toLowerCase();
if(""!==a&&"localhost"!==a&&"127.0.0.1"!==a){m.hn=a;var g=m.plusLicense;if(void 0===g)m.pl=2;else{for(var c=[[239800443,61606552,84],[201280845,11],[166507101,13]],e="",b=0,d=0,f,h=0;h<g.length;h++)f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-".indexOf(g.charAt(h)),0<=f&&(b&&(e+=String.fromCharCode(f<<8-b&255|d)),d=f>>b,b+=2,8==b&&(b=0));g=e;e=g.charCodeAt(0);b=g.substr(1,e);g=g.substr(e+1);d=8*b.length;f=1;for(var e=[0],n=h=0,p=1,t=b.charCodeAt(0),u=0;u<d;u++)268435455<f&&(f=
1,e[++h]=0),t&p&&(e[h]|=f),f<<=1,255<(p<<=1)&&(p=1,t=b.charCodeAt(++n));f=c[0];b=c[1];c=c[2];d=w(l(e,b),l(f,k(b,[1])),b);e=w(l(e,c),l(f,k(c,[1])),c);f=k(e,d);0==f.length?(f=k(d,e),f=l(q(f,y(b,c)),c),f=k(c,f)):f=l(q(f,y(b,c)),c);d=c=r(q(f,b),d);f=28*d.length;h=1;n=0;c=[0];p=1;for(b=e=0;b<f;b++)d[n]&h&&(c[e]|=p),255<(p<<=1)&&(p=1,c[++e]=0),268435455<(h<<=1)&&(h=1,n++);for(;0==c[e];)e--;d="";for(b=0;b<=e;b++)d+=String.fromCharCode(c[b]);e=d;h=e.length;c=[];for(b=0;256>b;b++)c[b]=b;for(n=d=0;2>n;n++)for(b=
0;256>b;b++)d=(e.charCodeAt(b%h)+c[b]+d)%256,f=c[b],c[b]=c[d],c[d]=f;h="";for(b=0;b<g.length;b++)e=b&255,d=c[e]+d&255,f=c[e],c[e]=c[d],c[d]=f,h+=String.fromCharCode(g.charCodeAt(b)^c[(c[e]+c[d])%256]);g=h;m.pld=g;m.pl=g===a?1:3}}}}})(m.Extensions||(m.Extensions={}))})(ProStyle||(ProStyle={}));
(function(m){(function(h){(function(m){(function(k){k.deserialize=function(m){h.c();return new k.MouseWheelController}})(m.MouseWheel||(m.MouseWheel={}))})(h.Controllers||(h.Controllers={}))})(m.Extensions||(m.Extensions={}))})(ProStyle||(ProStyle={}));(function(m){(function(h){(function(h){(function(h){h.serialize=function(h){return{}}})(h.MouseWheel||(h.MouseWheel={}))})(h.Controllers||(h.Controllers={}))})(m.Extensions||(m.Extensions={}))})(ProStyle||(ProStyle={}));
