/*!
 * VERSION: 1.1.0
 * DATE: 17-Sep-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(k,b){function n(){this.constructor=k}for(var l in b)b.hasOwnProperty(l)&&(k[l]=b[l]);n.prototype=b.prototype;k.prototype=new n},ProStyle;
(function(k){(function(b){(function(b){(function(l){var m=function(k){function m(l,q,b,t,n){k.call(this,l,"stack",q,b,t,"stackedpage");this.overriddenPageClass=b;this.stacks=n}__extends(m,k);m.prototype.serialize=function(){return l.serialize(this)};m.prototype.createView=function(k,m){return new l.StackFlowView(this,k,m)};m.defaultStacksJson={current:{position:[0,0,0],rotation:[0,0,0],scale:100,opacity:100},future:{position:[140,0,-200],rotation:[0,-10,5],scale:100,opacity:80,offset:{position:[130,
80,-200],rotation:[0,-5,2],scale:100,opacity:50}},past:{position:[-140,0,-200],rotation:[0,10,-5],scale:100,opacity:80,offset:{position:[-130,80,-200],rotation:[0,5,-2],scale:100,opacity:50}}};return m}(k.Models.Flows.PlacementFlowModel);l.StackFlowModel=m})(b.Stack||(b.Stack={}))})(b.Flows||(b.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(b){(function(b){(function(l){var m=function(k){function l(m,b,v){k.call(this,m,b,v);this.stackFlow=m}__extends(l,k);l.prototype.initializePages=function(l){var k=this,m=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio);this.pages.forEach(function(b,n){l.set(k.pages[n].div,{width:m.width,height:m.height,perspective:1E4},"initialize")})};l.prototype.generatePageMovement=function(l,k,m){var b=this.stackFlow.stacks.current,n=this.stackFlow.stacks.future,p=this.stackFlow.stacks.futureOffset,
r=this.stackFlow.stacks.past,w=this.stackFlow.stacks.pastOffset,a=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio),b=b.renderCss(a);this.applyCss(l,this.pages[m].div,k,1,b,Expo.easeOut);for(var r=r.duplicate(),g=m-1;0<=g;g--)b=r.renderCss(a),this.applyCss(l,this.pages[g].div,k,1,b,Expo.easeOut),r.adjust(w);n=n.duplicate();for(g=m+1;g<this.pages.length;g++)b=n.renderCss(a),this.applyCss(l,this.pages[g].div,k,1,b,Expo.easeOut),n.adjust(p)};l.prototype.applyCss=function(l,k,m,b,n,r){"initialize"===
m?l.set(k,n,m):(n.ease=r,l.to(k,b,n,m))};return l}(k.Views.Flows.PlacementFlowView);l.StackFlowView=m})(b.Stack||(b.Stack={}))})(b.Flows||(b.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(b){function n(a,g){var d=a.length,f=g.length;if(d<f)return n(g,a);for(var c=0,e=[],h=0;h<f;h++)c+=a[h]+g[h],e[h]=c&268435455,c>>>=28;for(;h<d;h++)c+=a[h],e[h]=c&268435455,c>>>=28;c&&(e[h]=c);return e}function l(a,g){var d=a.length,f=g.length,c=0,e=[];if(f>d)return[];if(f==d){if(g[f-1]>a[f-1])return[];if(1==f)return[a[0]-g[0]]}for(var h=0;h<f;h++)c+=a[h]-g[h],e[h]=c&268435455,c>>=28;for(;h<d;h++)c+=a[h],e[h]=c&268435455,c>>=28;if(c)return[];if(e[h-1])return e;for(;1<h&&0==e[h-
1];)h--;return e.slice(0,h)}function m(a,g){g=g.concat([0]);var d=a.length,f=g.length,c=[],e,h,l,k,m,b,n,r,p;for(e=d+f;0<=e;e--)c[e]=0;for(e=0;e<d;e++)if(h=a[e])for(l=0,r=h>>14,n=h&16383,k=e,h=0;h<f;h++,k++){m=g[h];b=m>>14;m&=16383;var q=m*r+n*b;p=q>>14;q&=16383;l+=c[k]+n*m+(q<<14);c[k]=l&268435455;l=(l>>28)+b*r+p}e=c.length;if(c[e-1])return c;for(;1<e&&0==c[e-1];)e--;return c.slice(0,e)}function r(a){for(var g=[];0<a--;)g[a]=0;return g}function p(a,g,d){for(var f=0;0<=g&&0<d--;)f=268435456*f+a[g--];
return f}function u(a,g){var d=a.length-1,f=g.length-1,c=d-f;if(d<f||d==f&&(a[d]<g[d]||0<d&&a[d]==g[d]&&a[d-1]<g[d-1]))return this.q=[0],this.mod=a,this;if(d==f&&4>p(a,f,2)/p(g,f,2)){for(var e=0;;){f=l(a,g);if(0==f.length)break;a=f;e++}this.q=[e];this.mod=a;return this}var h,k;k=Math.floor(Math.log(g[f])/w)+1;if(h=28-k){a=a.concat();g=g.concat();for(b=f;0<b;b--)g[b]=g[b]<<h&268435455|g[b-1]>>k;g[0]=g[0]<<h&268435455;a[d]&268435455<<k&268435455&&(a[++d]=0,c++);for(b=d;0<b;b--)a[b]=a[b]<<h&268435455|
a[b-1]>>k;a[0]=a[0]<<h&268435455}var b,n,q,e=r(c+1);for(q=r(c).concat(g);;){n=l(a,q);if(0==n.length)break;e[c]++;a=n}var c=g[f],t=p(g,f,2);for(b=d;b>f;b--){d=b-f-1;e[d]=b>=a.length?1:a[b]==c?268435455:Math.floor(p(a,b,2)/c);for(n=p(a,b,3);e[d]*t>n;)e[d]--;q=q.slice(1);n=l(a,m([e[d]],q));0==n.length&&(e[d]--,n=l(a,m([e[d]],q)));a=n}if(h){for(b=0;b<a.length-1;b++)a[b]=a[b]>>h|a[b+1]<<k&268435455;a[a.length-1]>>=h}for(;1<e.length&&0==e[e.length-1];)e=e.slice(0,e.length-1);for(;1<a.length&&0==a[a.length-
1];)a=a.slice(0,a.length-1);this.mod=a;this.q=e;return this}function q(a,g){if(1==g.length){if(1==a.length)return[a[0]%g[0]];if(16383>g[0]){var d;d=g[0];if(16383<d)d=q(a,[d]);else{for(var f=0,c,e=a.length-1;0<=e;e--)c=a[e],f=((c>>14)+(f<<14))%d,f=((c&16383)+(f<<14))%d;d=f}return[d]}}return u(a,g).mod}function v(a,g,d){var f=[1],c,e,h=a.concat(),b=[];a=2*d.length;for(b[a--]=1;0<=a;a--)b[a]=0;b=u(b,d).q;for(a=0;a<g.length;a++)for(e=1,c=0;28>c;c++,e<<=1)g[a]&e&&(f=t(m(f,h),d,b)),h=t(m(h,h),d,b);return f}
function t(a,g,d){var f=a.length-(g.length<<1);if(0<f)return t(a.slice(0,f).concat(t(a.slice(f),g,d)),g,d);var f=g.length+1,c=m(a.slice(g.length-1),d).slice(f),e=a.slice(0,f),c=m(c,g).slice(0,f);a=l(e,c);0==a.length&&(e[f]=1,a=l(e,c));for(e=0;;e++){f=l(a,g);if(0==f.length)break;a=f;if(3<=e)return t(a,g,d)}return a}function x(a,g){var d=l(a,g);0==d.length?(this.a=l(g,a),this.sign=1):(this.a=d,this.sign=0);return this}function z(a,g){if(a.sign){if(g.sign)return x(g,a);this.a=n(a,g);this.sign=1}else if(g.sign)this.a=
n(a,g),this.sign=0;else return x(a,g);return this}function y(a,g){var d=g.concat(),f,c,e=[1],h=[0],b;e.sign=0;for(h.sign=0;1<d.length||d[0];)f=d.concat(),c=u(a,d),d=c.mod,c=c.q,a=f,f=h.concat(),b=h.sign,c=m(h,c),c.sign=h.sign,c=z(e,c),h=c.a,h.sign=c.sign,e=f,e.sign=b;a:if(d=[1],a.length!=d.length)d=0;else{for(f=a.length-1;0<=f;f--)if(a[f]!=d[f]){d=0;break a}d=1}if(0==d)return[0];e.sign&&(e=l(g,e));return e}var w=Math.log(2);b.c=function(){if(!k.pl){var a=window.location.hostname.trim().toLowerCase();
if(""!==a&&"localhost"!==a&&"127.0.0.1"!==a){k.hn=a;var g=k.plusLicense;if(void 0===g)k.pl=2;else{for(var d=[[239800443,61606552,84],[201280845,11],[166507101,13]],f="",c=0,e=0,h,b=0;b<g.length;b++)h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-".indexOf(g.charAt(b)),0<=h&&(c&&(f+=String.fromCharCode(h<<8-c&255|e)),e=h>>c,c+=2,8==c&&(c=0));g=f;f=g.charCodeAt(0);c=g.substr(1,f);g=g.substr(f+1);e=8*c.length;h=1;for(var f=[0],r=b=0,p=1,t=c.charCodeAt(0),u=0;u<e;u++)268435455<h&&(h=
1,f[++b]=0),t&p&&(f[b]|=h),h<<=1,255<(p<<=1)&&(p=1,t=c.charCodeAt(++r));h=d[0];c=d[1];d=d[2];e=v(q(f,c),q(h,l(c,[1])),c);f=v(q(f,d),q(h,l(d,[1])),d);h=l(f,e);0==h.length?(h=l(e,f),h=q(m(h,y(c,d)),d),h=l(d,h)):h=q(m(h,y(c,d)),d);e=d=n(m(h,c),e);h=28*e.length;b=1;r=0;d=[0];p=1;for(c=f=0;c<h;c++)e[r]&b&&(d[f]|=p),255<(p<<=1)&&(p=1,d[++f]=0),268435455<(b<<=1)&&(b=1,r++);for(;0==d[f];)f--;e="";for(c=0;c<=f;c++)e+=String.fromCharCode(d[c]);f=e;b=f.length;d=[];for(c=0;256>c;c++)d[c]=c;for(r=e=0;2>r;r++)for(c=
0;256>c;c++)e=(f.charCodeAt(c%b)+d[c]+e)%256,h=d[c],d[c]=d[e],d[e]=h;b="";for(c=0;c<g.length;c++)f=c&255,e=d[f]+e&255,h=d[f],d[f]=d[e],d[e]=h,b+=String.fromCharCode(g.charCodeAt(c)^d[(d[f]+d[e])%256]);g=b;k.pld=g;k.pl=g===a?1:3}}}}})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(b){(function(n){(function(l){var m=k.Util;l.deserialize=function(n,p){b.c();var u=k.Types.Placement.fromJson(m.getSetup(p,"placement")),q=m.convertToNumber(m.getSetup(p,"pageAspectRatio"),4/3),v=k.Types.Stacks.fromJson(m.getSetup(p,"stacks")||l.StackFlowModel.defaultStacksJson);return new l.StackFlowModel(n,u,m.getSetup(p,"pageClass"),q,v)}})(n.Stack||(n.Stack={}))})(b.Flows||(b.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
(function(k){(function(b){(function(b){(function(b){b.serialize=function(b){var k={setup:{}};void 0!==b.overriddenPageClass&&(k.setup.pageClass=b.overriddenPageClass);return k}})(b.Stack||(b.Stack={}))})(b.Flows||(b.Flows={}))})(k.Extensions||(k.Extensions={}))})(ProStyle||(ProStyle={}));
